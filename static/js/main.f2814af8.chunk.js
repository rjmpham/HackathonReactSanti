(window.webpackJsonpsanti=window.webpackJsonpsanti||[]).push([[0],{1:function(e,t,a){e.exports={body:"Menu_body__2jcq5",purple_text:"Menu_purple_text__w3NqM",orange_text:"Menu_orange_text__2l0Jv"}},11:function(e,t,a){e.exports=a(17)},16:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(10),o=a.n(i),l=(a(16),a(2)),s=a(3),c=a(6),h=a(4),u=a(7),m=a(5),g=function(){function e(t,a){Object(l.a)(this,e),this.x=t,this.y=a}return Object(s.a)(e,[{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}}]),e}(),d={GROUND:0,L_ONE:1,L_TWO:2,L_THREE:3,DOME:"D"},v=function(){function e(t,a){Object(l.a)(this,e),this.description="This is a tile!",this.topLevel=d.GROUND,this.capped=!1,this.worker=null,this.isHighlighted=!1,this.position=new g(t,a),this.description+=this.position.toString()}return Object(s.a)(e,[{key:"moveWorker",value:function(e){this.worker=e,console.log("Worker is now "+this.worker)}},{key:"removeWorker",value:function(){this.worker=null}},{key:"isBuildable",value:function(){return!this.capped&&null===this.worker}},{key:"buildFloor",value:function(){this.topLevel+1===4?(this.topLevel=d.DOME,this.capped=!0):this.topLevel+=1}},{key:"hasWorkerWon",value:function(){return null===this.worker&&this.topLevel===d.L_THREE}},{key:"getIndicator",value:function(){return this.worker.getIndicator()}},{key:"reset",value:function(){this.topLevel=d.GROUND,this.capped=!1,this.worker=null,this.isHighlighted=!1}}]),e}(),p=function(){function e(t){Object(l.a)(this,e),this.boardState=null,this.playerList=[],this.activePlayer=null,this.boardSize=0,this.winner=null,this.selectedWorker=null,this.highlightedTiles=[],this.isInSetup=!0,this.needsToSelectWorker=!1,this.workerNeedsToMove=!1,this.needsToBuild=!1,this.error_message=null,this.boardState=new Array(t);for(var a=0;a<this.boardState.length;a++)this.boardState[a]=new Array(t);for(var r=0;r<this.boardState[0].length;r++)for(var n=0;n<this.boardState[r].length;n++)this.boardState[r][n]=new v(r,n);this.boardSize=t}return Object(s.a)(e,[{key:"getLocalNine",value:function(e){for(var t=[],a=-1;a<=1;a++)for(var r=-1;r<=1;r++){var n=e.x+a,i=e.y+r;n>=0&&n<this.boardSize&&i>=0&&i<this.boardSize&&(void 0===!this.boardState[n][i]?console.error("Attempted to push undefined to local 9."):t.push(this.boardState[n][i]))}return t}},{key:"getTile",value:function(e){return this.boardState[e.x][e.y]}},{key:"buildFloor",value:function(e){this.boardState[e.x][e.y].buildFloor()}},{key:"moveWorker",value:function(e,t){null===this.selectedWorker&&console.error("There is no worker selected."),this.boardState[t.x][t.y].moveWorker(this.selectedWorker),this.boardState[e.x][e.y].removeWorker()}},{key:"playerHasWon",value:function(){return null===this.winner}},{key:"highlightTiles",value:function(e){var t=this;null===this.selectedWorker&&console.error("Selected worker is null"),0!==e.length&&e.forEach(function(e){t.getTile(e.position).isHighlighted=!0,t.highlightedTiles.push(e)})}},{key:"clearHighlightedTiles",value:function(){var e=this;this.highlightedTiles.forEach(function(t){e.getTile(t.position).isHighlighted=!1}),this.highlightedTiles=[]}},{key:"setTile",value:function(e,t){this.boardState[e.x][e.y]=t}},{key:"reset",value:function(){for(var e=0;e<this.boardState[0].length;e++)for(var t=0;t<this.boardState[e].length;t++)this.boardState[e][t].reset();this.playerList.forEach(function(e){return e.reset()}),this.winner=null}},{key:"logGameState",value:function(){console.log("Current state: ");for(var e=0;e<this.boardSize;e++)for(var t=0;t<this.boardSize;t++)console.log(this.boardState[e][t].position+" has worker: "+this.boardState[e][t].worker)}}]),e}(),S=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(h.a)(t).call(this,e))).state={squareLevel:"square0",gameState:a.props.gameState},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"handleClick",value:function(){this.props.onClick(this.props.position);var e=this.state.gameState.boardState[this.props.position.x][this.props.position.y];e.topLevel===d.GROUND?this.setState({squareLevel:"square0"}):e.topLevel===d.L_ONE?this.setState({squareLevel:"square1"}):e.topLevel===d.L_TWO?this.setState({squareLevel:"square2"}):e.topLevel===d.L_THREE?this.setState({squareLevel:"square3"}):this.setState({squareLevel:"square4"})}},{key:"render",value:function(){var e=this,t=this.state.gameState.boardState[this.props.position.x][this.props.position.y],a=null==t.worker?"":t.worker.indicator;return t.is_highlighted&&this.setState({squareLevel:"highlightedsquare"}),n.a.createElement("button",{className:this.state.squareLevel,onClick:function(){return e.handleClick()}},n.a.createElement("div",{className:"playerRow"},a))}}]),t}(n.a.Component),k=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(h.a)(t).call(this,e))).squareElement=n.a.createRef(),a.state={viewGameState:a.props.gameState},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"updateSquare",value:function(){this.squareElement.current.updateSelf()}},{key:"renderSquare",value:function(e){var t=this;return n.a.createElement(S,{ref:this.squareElement,position:e,tileState:this.state.viewGameState.boardState[e.x][e.y],onClick:function(e){return t.props.onClick(e)},gameState:this.state.viewGameState})}},{key:"generateBoardRow",value:function(e){for(var t=[],a=0;a<5;a++)t.push(this.renderSquare(new g(e,a)));return t}},{key:"generateBoard",value:function(){for(var e=[],t=0;t<5;t++)e.push(n.a.createElement("div",{className:"board-row"},this.generateBoardRow(t)));return e}},{key:"render",value:function(){return n.a.createElement("div",null,this.generateBoard())}}]),t}(n.a.Component),f={NEWGAME:0,PASS:1},b=a(8),y=a.n(b);var w=function(e){function t(t){e.onClick(t)}return n.a.createElement("div",null,n.a.createElement("button",{className:y.a.menuButton,onClick:function(){return t(f.PASS)}},"Pass"),n.a.createElement("button",{className:y.a.menuButton,onClick:function(){return t(f.NEWGAME)}},"New Game"))},E=function(){function e(t,a,r){Object(l.a)(this,e),this.gender=0,this.position=null,this.owner=null,this.indicator="W",this.position=t,this.owner=a,this.indicator=r}return Object(s.a)(e,[{key:"logSomething",value:function(){console.log("I LOGGED SOMETHING")}}]),e}(),_=function(){function e(t,a,r){Object(l.a)(this,e),this.workers=[],this.moveDistance=1,this.workerID="",this.gameState=t,this.workerID=a,this.playerName=r}return Object(s.a)(e,[{key:"placeWorker",value:function(e){var t=new E(e,this,this.workerID);return this.workers.push(t),console.log("Placed worker at "+e),t}},{key:"moveWorker",value:function(e,t){for(var a=0;a<this.workers.length;a++){var r=this.workers[a];r.position.equals(e)&&(r.position=t)}this.gameState.getTile(e).hasWorkerWon()&&(this.gameState.winner=this)}},{key:"getAllValidWorkerMoves",value:function(e){var t=this.gameState.getTile(e),a=this.gameState.getLocalNine(e);a=(a=a.filter(function(e){return e.isBuildable()})).filter(function(e){return e.topLevel<=t.topLevel+1});for(var r=[],n=0;n<a.length;n++)r.push(a[n].position);return r}},{key:"verifyMove",value:function(e,t){var a=this.getAllValidWorkerMoves(e);a.forEach(function(e){return console.log(e)});for(var r=!1,n=0;n<a.length;n++)a[n].equals(t)&&(console.log("The move is valid."),r=!0);return r}},{key:"hasWorkerAtPosition",value:function(e){var t=!1;return this.workers.forEach(function(a){a.position.equals(e)&&(t=!0)}),t}},{key:"reset",value:function(){this.workers=[]}}]),e}(),N=function(){function e(t){Object(l.a)(this,e),this.gameState=new p(5),this.player_1=new _(this.gameState,"1"),this.player_2=new _(this.gameState,"2"),this.gameState.activePlayer=this.player_1,this.game=t}return Object(s.a)(e,[{key:"placeWorker",value:function(e){this.gameState.activePlayer.placeWorker(e)}},{key:"moveWorker",value:function(e,t){this.gameState.moveWorker(e,t),this.gameState.activePlayer.moveWorker(e,t)}},{key:"buildFloor",value:function(e){this.gameState.buildFloor(e)}},{key:"newGame",value:function(){this.gameState.isInSetup=!0,this.gameState.needsToSelectWorker=!1,this.gameState.workerNeedsToMove=!1,this.gameState.needsToBuild=!1,this.gameState.reset(),this.player_1=new _(this.gameState,"1"),this.player_2=new _(this.gameState,"2"),this.gameState.activePlayer=this.player_1,console.log("Created a new game.")}},{key:"newTurn",value:function(){this.gameState.needsToBuild=!1,this.gameState.workerNeedsToMove=!1,this.gameState.needsToSelectWorker=!0,this.gameState.activePlayer=this.gameState.activePlayer===this.player_1?this.player_2:this.player_1}},{key:"find_buildable_positions",value:function(e){var t=this.gameState.getLocalNine(e),a=[];return t.forEach(function(t){t.isBuildable()&&t.position!==e&&a.push(t)}),a}},{key:"handleWorkerMovement",value:function(e){var t=this.gameState.selectedWorker.position;return this.gameState.activePlayer.verifyMove(t,e)?(console.log("Moving worker to "+e.toString()),this.moveWorker(t,e),this.gameState.getTile(e).topLevel===d.L_THREE?(this.gameState.winner=!0,!1):(this.gameState.needsToBuild=!0,this.gameState.needsToSelectWorker=!1,!1)):(this.gameState.error_message="Can't move worker to that location.",!0)}},{key:"handleWorkerSelection",value:function(e){var t=this.gameState.getTile(e);if(null===t.worker)return this.gameState.error_message="Selected a tile without a worker",!0;var a=t.worker;return this.gameState.activePlayer.hasWorkerAtPosition(e)?(console.log("The user has selected their worker"),this.gameState.selectedWorker=a,this.gameState.workerNeedsToMove||(this.gameState.workerNeedsToMove=!0),!1):(this.gameState.error_message="Select your worker",!0)}},{key:"handleBoardClick",value:function(e){if(!0!==this.gameState.winner)if(this.gameState.isInSetup)this.gameState.isInSetup=this.handleSetup(e);else if(this.gameState.needsToSelectWorker)this.gameState.needsToSelectWorker=this.handleWorkerSelection(e);else{if(this.gameState.workerNeedsToMove){if(this.gameState.getTile(e).isBuildable()){this.gameState.workerNeedsToMove=this.handleWorkerMovement(e);var t=this.find_buildable_positions(e);return void this.gameState.highlightTiles(t)}return this.handleWorkerSelection(e)?void(this.gameState.error_message="Worker can't move to that location"):void 0}if(this.gameState.needsToBuild){console.log("Attempting to build at position "+e);var a=this.gameState.getTile(e);if(a.isBuildable()){for(var r=this.gameState.selectedWorker.position,n=this.gameState.getLocalNine(r),i=!1,o=0;o<n.length;o++)if(n[o]===a){this.gameState.buildFloor(e),i=!0;break}i?(this.gameState.clearHighlightedTiles(),this.newTurn()):this.gameState.error_message="Build Position is unreachable"}else this.gameState.error_message="Can't build on tiles that are already occupied"}}}},{key:"handleSetup",value:function(e){var t=this.gameState.getTile(e);return null!==t.worker?(this.gameState.error_message="Cannot place worker, tile is occupied.",!0):this.player_1.workers.length<2?(t.worker=this.player_1.placeWorker(e),2===this.player_1.workers.length&&(this.gameState.activePlayer=this.player_2),!0):this.player_2.workers.length<2?(t.moveWorker(this.player_2.placeWorker(e)),2!==this.player_2.workers.length||(this.gameState.needsToSelectWorker=!0,this.gameState.activePlayer=this.player_1,!1)):void 0}}]),e}(),W=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(h.a)(t).call(this,e))).winningJSX=null,a.errorJSX=null,a.controller=new N(Object(u.a)(a)),a.state={viewGameState:a.controller.gameState},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"handleBoardClick",value:function(e){this.controller.handleBoardClick(e),this.setState({viewGameState:this.controller.gameState}),this.state.viewGameState.winner?this.winningJSX=n.a.createElement("div",{className:"winner"},"Player ",this.get_current_player()," wins!!! ",n.a.createElement("span",{role:"img","aria-label":"medal"},"\ud83c\udf96\ufe0f")):this.winningJSX=null,null!=this.state.viewGameState.error_message?(this.errorJSK=n.a.createElement("p",null,n.a.createElement("b",{style:{color:"#b33939"}},n.a.createElement("span",{role:"img","aria-label":"warning"},"\u26a0\ufe0f"))," ",this.state.viewGameState.error_message),this.controller.gameState.error_message=null):this.errorJSK=null}},{key:"get_current_player",value:function(){return this.state.viewGameState.activePlayer.workerID}},{key:"get_turn_phase",value:function(){return this.state.viewGameState.isInSetup?"Setup \u2699\ufe0f":this.state.viewGameState.needsToSelectWorker||this.state.viewGameState.workerNeedsToMove?"Worker Movement \ud83e\uddf3":this.state.viewGameState.needsToBuild?"Building \ud83d\udd28":void 0}},{key:"handleControlClick",value:function(e){e===f.NEWGAME?document.location.reload(!0):e===f.PASS&&(this.controller.newTurn(),this.updateState())}},{key:"updateState",value:function(){this.setState({viewGameState:this.controller.gameState})}},{key:"render",value:function(){var e=this,t=this.get_current_player(),a=this.get_turn_phase();return n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",null,"Santorini in React ",n.a.createElement("span",{role:"img","aria-label":"wave"},"\ud83c\udf0a")),n.a.createElement("h4",null,"Created by Erik Biederstadt, Richard Pham, and David "),n.a.createElement("div",{className:"game"},n.a.createElement("div",{className:"game-board"},n.a.createElement(k,{ref:this.boardElement,onClick:function(t){return e.handleBoardClick(t)},gameState:this.state.viewGameState})),n.a.createElement("div",{className:"winner-panel"},n.a.createElement("div",{className:"control-panel"},n.a.createElement(w,{onClick:function(t){return e.handleControlClick(t)},gameState:this.state.viewGameState})),n.a.createElement("p",null,"It is ",n.a.createElement("b",null,"Player ",t,"'s turn")),n.a.createElement("p",null,n.a.createElement("b",null,"Turn Phase:")," ",a),this.errorJSK,this.winningJSX)))}}]),t}(n.a.Component),T=a(1),x=a.n(T);o.a.render(n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"inner_content"},n.a.createElement(W,null),n.a.createElement(function(){return n.a.createElement("div",{className:x.a.body},n.a.createElement("h2",null,"Setup"),n.a.createElement("p",null,"The youngest player is the ",n.a.createElement("b",{className:x.a.orange_text},"Start Player"),", who begins by placing 2 ",n.a.createElement("b",{className:x.a.orange_text},"Workers")," of their chosen color into any ",n.a.createElement("b",{className:x.a.orange_text},"Unoccupied Spaces")," on the board. The other players then place their ",n.a.createElement("b",{className:x.a.orange_text},"Workers.")),n.a.createElement("h2",null,"How to Play"),n.a.createElement("p",null,"Player take turns, starting with the ",n.a.createElement("b",{className:x.a.orange_text},"Start Player"),", who first placed their ",n.a.createElement("b",{className:x.a.orange_text},"Workers"),". On your turn, select one of you ",n.a.createElement("b",{className:x.a.orange_text},"Workers"),". You must ",n.a.createElement("b",{className:x.a.purple_text},"move")," and then ",n.a.createElement("b",{className:x.a.purple_text},"build")," with the ",n.a.createElement("b",{className:x.a.orange_text},"selected Worker.")),n.a.createElement("p",null,n.a.createElement("b",{className:x.a.purple_text},"Move")," your selected ",n.a.createElement("b",{className:x.a.orange_text},"Worker")," into one of the (up to eight neighbouring spaces)."),n.a.createElement("p",null,"A ",n.a.createElement("b",{className:x.a.orange_text},"Worker")," may ",n.a.createElement("b",{className:x.a.purple_text},"move up")," a maximum of one Level higher, ",n.a.createElement("b",{className:x.a.purple_text},"move down")," any number of Levels lower, or ",n.a.createElement("b",{className:x.a.purple_text},"move")," along the same Level. A ",n.a.createElement("b",{className:x.a.orange_text},"Worker")," may not move up more than one Level."),n.a.createElement("p",null,"The space your ",n.a.createElement("b",{className:x.a.orange_text},"Worker")," ",n.a.createElement("b",{className:x.a.purple_text},"moves")," into must be ",n.a.createElement("b",{className:x.a.orange_text},"unoccopied")," (not containing a ",n.a.createElement("b",{className:x.a.orange_text},"Worker")," or a ",n.a.createElement("b",{className:x.a.orange_text},"Tower"),")."),n.a.createElement("p",null,n.a.createElement("b",{className:x.a.purple_text},"Build")," a ",n.a.createElement("b",{className:x.a.orange_text},"Block")," or a ",n.a.createElement("b",{className:x.a.orange_text},"Tower")," on a unoccupied space ",n.a.createElement("b",{className:x.a.purple_text},"neighbouring")," the ",n.a.createElement("b",{className:x.a.orange_text},"Moved Worker"),"."),n.a.createElement("p",null,"You can ",n.a.createElement("b",{className:x.a.purple_text},"build")," onto a ",n.a.createElement("b",{className:x.a.orange_text},"Level")," of any height, but you ",n.a.createElement("b",null,n.a.createElement("u",null,"must"))," choose the correct shape of Block or Tower for the Level being built. A Tower with ",n.a.createElement("b",{className:x.a.orange_text},"3 Blocks")," and a Tower is considered a ",n.a.createElement("b",{className:x.a.orange_text},'"Complete Tower"'),"."),n.a.createElement("h2",null,"Winning the Game"),n.a.createElement("p",null,"If one of your ",n.a.createElement("b",{className:x.a.orange_text},"Workers")," ",n.a.createElement("b",{className:x.a.purple_text},"moves up")," on top of ",n.a.createElement("b",{className:x.a.orange_text},"Level 3")," durning your turn, you insantly win!"))},null))),document.getElementById("root"))},8:function(e,t,a){e.exports={menuButton:"ControlPanel_menuButton__1Z5RU"}}},[[11,1,2]]]);
//# sourceMappingURL=main.f2814af8.chunk.js.map